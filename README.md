# Qirimtatar Embedding Crawlers
Набор краулеров для сбора и обработки текстов на крымскотатарском языке из различных веб-источников. Проект создан с целью формирования корпуса данных для обучения эмбеддингов крымскотатарского языка.

## Полученные данные
Скачать выгруженные документы можно:

- [Яндекс.Диск](https://disk.yandex.ru/d/SX96GBiwhPqasA)
- [HTTP сервер](http://89.169.165.5:8000/)
- FTP: обратитесь к [@nikpeg](https://t.me/nikpeg) для получения доступа
## Установка и настройка
### Требования
- Python 3.8+
- Tesseract OCR (для распознавания текста из PDF и изображений)
- Достаточно свободного места на диске (рекомендуется 200+ ГБ)
### Зависимости
Установите необходимые библиотеки:
```bash
pip install -r requirements.txt
```
### Настройка конфигурации
- Переименуйте файл .global_config_(empty_rename_to_.global_config).ini в .global_config.ini
- Заполните необходимые параметры в конфигурационном файле:
- API ключи для Яндекс API (определение языка)
- Пути для сохранения файлов
- Настройки прокси (если требуется)
## Запуск
- Парсер сайта Шамиля Алядина
```bash
cd shamil-pages-parser
python main.py
```
- Обработка архивов Qirim Junior
```bash
cd junior_archives
python main.py
```
- Для обработки только изображений:
```bash
cd junior_archives
python img_convert.py
```
## Исходные данные и источники
Проект включает краулеры для следующих источников (статус реализации):

| Источник                                                                                               | Статус | Особенности |
|--------------------------------------------------------------------------------------------------------|--------|-------------|
| [Сайт Шамиля Алядина](https://shamil-alyadin.com/ru/page.php?id=3&book=1&title=61)                     | ✅Реализовано | Тексты, DOC файлы |
| [Гугл-диск Qirim Junior](https://drive.google.com/drive/u/0/folders/1stPJoQXJM5qJEs8h1gZ5Snj9OJviBsFp) | ✅Реализовано | Оцифрованные PDF документы |
| [Сайт Лейли Эмир](https://leylaemir.org/rus/literary-gallery/yusuf-ali/yusuf-ali-qirim-milliy.php)     | ⏳ В планах | Тексты |
| [Сайт АнаЮрт](https://ana-yurt.com/qrt/anaurt-lugat)                                                   | ⏳ В планах | Требуется VPN, песни/сказки/пословицы |
| [Библиотека им. Гаспиринского](https://gasprinskylibrary.ru/)                                          | ⏳ В планах | Временно заблокирована регистрация из-за атаки |
| [Qırım Akademiyası](https://kirimakademiyasi.blogspot.com/)                                            | ⏳ В планах | PDF документы по годам |
| [Журнал Dört](https://dort-qirim.org/)                                                                 | ⏳ В планах | В основном новости |
| [Газета Голос Крыма](http://goloskrimanew.ru/)                                                         | ⏳ В планах | Преимущественно новости |
| [Новый сайт академии](https://kirimakademiyasi.ru/kitaplar/)                                           | ⏳ В планах | Много PDF документов |

### Определение языка
Для определения крымскотатарского языка используется Яндекс API переводчика. Из-за особенностей распознавания близких тюркских языков, следующие коды языков считаются приемлемыми как крымскотатарский:

```json
{"langs": ["tr", "os", "tyv", "tt", "tg", "te", "bo", "tk", "uz", "oc", "mrj", "tat", "tuk", "ky"]}
```
### Обработка PDF
- Используется Tesseract OCR для распознавания текста
- Извлеченные изображения сохраняются отдельно для возможных дальнейших исследований
- Удалены водяные знаки типа "Evaluation Only. Created with Aspose.Words"
### Обработка архивов
- Реализована многопоточная обработка (7 потоков для каждого архива)
- Исключены учебные материалы, содержащие слова из черного списка: ["русский", "математика", "язык"]
- Распакованные архивы занимают около 10 ГБ дискового пространства
### Обработка изображений
- Реализована асинхронная обработка изображений, извлеченных из PDF документов
- Используется модуль `_pdf_utils.image_text_collect` для распознавания текста с помощью Tesseract OCR
- Результаты OCR сохраняются в текстовые файлы с кодировкой UTF-8-SIG для поддержки крымскотатарских символов
- Система обрабатывает все изображения в заданных директориях и создает соответствующие .txt файлы
- Распознавание запускается через специальный скрипт `img_convert.py` в директории `junior_archives`
- Учтены особенности работы асинхронного цикла событий в Windows через настройку политики `WindowsSelectorEventLoopPolicy()`
## Известные проблемы
- Сайт библиотеки им. Гаспиринского: временно отключена регистрация из-за атаки на сайт
- Качество OCR: тексты из PDF документов часто имеют ошибки распознавания
- Ложные срабатывания: OCR иногда находит текст там, где его нет, но Яндекс API обычно определяет такие случаи как ошибки
- Проблемы с сайтом Академии: не открываются PDF файлы на сайте kirimakademiyasi.blogspot.com
- Дисковое пространство: требуется значительное количество места (не менее 200 ГБ)
- Производительность: архиватор является узким местом из-за синхронной природы операций
## Будущие улучшения
- Реализация обработки остальных источников
- Улучшение качества OCR для крымскотатарского языка
- Оптимизация использования дискового пространства
- Расширение функциональности определения языка
- Улучшение очистки текста от артефактов
## Лицензия
Исходный код репозитория находится в свободном доступе и может быть использован, изменен или распространен без ограничений.

При обработке документов использовались библиотеки Aspose, которые оставляли водяные знаки "Evaluation Only. Created with Aspose.Words. Copyright 2003-2025 Aspose Pty Ltd.". Несмотря на то, что эти водяные знаки были удалены из текстового вывода, правовой статус исходных документов и обработанных файлов остается неизменным. Пользователи данных должны соблюдать лицензионные ограничения оригинальных материалов.

Обратите внимание, что сам корпус текстов может содержать материалы с различными авторскими правами, и пользователи должны соблюдать соответствующие лицензионные ограничения при использовании этих данных.